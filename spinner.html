<!DOCTYPE html>
<html lang="en" class="h-100">
    <head>
        <meta charset="utf-8">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
        <script>
          function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
          }
          document.addEventListener('DOMContentLoaded', () => {
            const spinnerDiv = document.getElementById('spinner');
            // const itemCount = 10; // 변경 가능한 항목의 개수

            let jobs = [
              {name: 'PLD'},
              {name: 'WAR'},
              {name: 'DRK'},
              {name: 'GNB'},
              {name: 'WHM'},
              {name: 'SCH'},
              {name: 'AST'},
              {name: 'SGE'},
              {name: 'MNK'},
              {name: 'DRG'},
              {name: 'NIN'},
              {name: 'SAM'},
              {name: 'RPR'},
              {name: 'BRD'},
              {name: 'MCH'},
              {name: 'DNC'},
              {name: 'BLM'},
              {name: 'SMN'},
              {name: 'RDM'},
            ];

            jobs = shuffleArray(jobs);
            
            for (let i = 0; i < jobs.length; i++) {
                const span = document.createElement('span');
                // span.innerText = jobs[i].name;
                span.style.transform = `rotate(${(360 / jobs.length) * i}deg)`;
                spinnerDiv.appendChild(span);

                const nameSpan = document.createElement('span');
                nameSpan.innerText = jobs[i].name;
                nameSpan.classList.add('name');

                span.appendChild(nameSpan);
                
                const line = document.createElement('div');
                line.classList.add('line', 'overflow-hidden');
                line.style.transform = `rotate(${(360 / jobs.length) * i + (360 / jobs.length / 2)}deg) translate(-50%, -880%)`;
                spinnerDiv.appendChild(line);
            }
          });
          
          let deg = 0; // 회전시킬 각도
          const addSpin = () => {
            deg += 360 + (Math.random() * 360);
            document.getElementById('spinner').style.transform = `rotate(${deg}deg)`;
            console.log(deg);
          }


          // function rotateDiv() {
          //   if (leftDeg <= 0) {
          //     clearInterval(rotationInterval);
          //   } else {
          //     document.getElementById('spinner').style.transform = `rotate(${leftDeg}deg)`;
          //     leftDeg -= 50; // 각도를 줄여서 회전 속도를 느리게 함
          //   }
          // }

          // let rotationInterval = setInterval(rotateDiv, 100); // 1밀리초마다 회전
      </script>
      <style>
        body {
          background-image: url('./img/bg_ff.jpg');
          background-size: cover;
          background-repeat: no-repeat;
          background-position: center;
        }
        .name {
          z-index: 10;
          font-size: 1.5em;
          color: white;
          position: relative;
        }
        .name::before {
          content: '';
          position: absolute;
          top: 2rem;
          left: 43%;
          transform: rotate(-10deg);
          height: .8rem;
          border: 1px solid white;
          color: white;
        }
        .spinner {
          position: relative;
          transition: transform 2s ease;
          backdrop-filter: blur(5px);
        }
        .spinner span {
          position: absolute; /* 원의 테두리에 배치하기 위해 */
          inset: 0;
          display: inline-block;
          text-align: center;
          padding-top: 1rem;
        }
        .line {
          display: none;
          position: absolute;
          top: 47%;
          left: 50%;
          height: 5%;
          border: .5px solid white;
          color: white;
        }
        .niddle {
          width: 0;
          height: 0;
          border: .5rem solid transparent;
          border-left: 0;
          border-right: 2rem solid white;
          position:relative
        }
      </style>
    </head>
    <body class="d-flex align-items-center justify-content-center h-100 overflow-hidden position-relative" onselectstart="return false;" ondragstart="return false;">
      <div class="wrapper position-absolute d-flex align-items-center justify-content-end" style="max-width: 90vw; max-height: 90vh; width: 90vh; height: 90vw;">
        <div class="niddle shadow"></div>
      </div>
      <!-- <div class="rounded-pill p-4 position-absolute border border-3 border-black" style="background-color: white; z-index: 1; top: 50%; left: 50%; transform: translate(-50%, -50%);"></div> -->
      <div class="shadow rounded-pill overflow-hidden">
        <div id="spinner" onclick="addSpin()" 
        class="spinner rounded-pill p-4 d-flex align-items-center justify-content-center shadow" 
        style="max-width: 80vw; max-height: 80vh; width: 80vh; height: 80vw; transform: rotate(0deg); z-index: 1;">
        </div>
      </div>
    </body>
</html>
